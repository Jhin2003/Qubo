.chat-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  padding: 2%;
  background-color: #212121;

  .brand-name {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: white;
  }

  /* ===================== Chat Box ===================== */
  .chat-box {
    flex: 1;                 // takes all remaining space
    overflow-y: auto;        // only scroll messages
    align-self: center;
    width: 680px;            // consistent width with input
    display: flex;
    flex-direction: column;
    min-height: 0;           // prevent children from stretching the container

    /* Messages */
    .message {
      padding: 14px 12px;
      margin: 5px 0;
      border-radius: 10px;
      word-wrap: break-word;     // break long words
      overflow-wrap: anywhere;   // modern replacement
      white-space: pre-wrap;

      &.user {
        background-color: #303030;
        align-self: flex-end;
        margin-left: auto;
        font-size: 1rem;
        line-height: 1.5;
        max-width: 70%;
      }

      &.bot {
        align-self: flex-start;
        font-size: 1rem;
        line-height: 1.5;
        max-width: 100%;
      }

      .sources {
        font-size: 0.85rem;
        color: #555;
        margin-top: 6px;

        ul {
          margin: 4px 0 0 12px;
          padding: 0;
        }

        li {
          list-style-type: disc;
        }
      }
    }

    /* ---------- Gemini-like thinking bubble ---------- */
    .message.bot.thinking {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    /* Animated dots */
    .typing-dots {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      height: 14px;
      margin-top: 2px;

      span {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        display: inline-block;
        background: linear-gradient(90deg, #7f5af0, #2cb67d, #ef4565);
        background-size: 200% 200%;
        animation: dotBounce 1.2s infinite ease-in-out, hueShift 3s linear infinite;
        opacity: 0.9;

        &:nth-child(2) { animation-delay: .15s, 0s; }
        &:nth-child(3) { animation-delay: .30s, 0s; }
      }
    }

    /* Shimmer skeleton lines */
    .typing-shimmer {
      display: flex;
      flex-direction: column;
      gap: 8px;
      margin-top: 6px;

      .shimmer-line {
        height: 10px;
        width: 88%;
        border-radius: 6px;
        background: linear-gradient(
          90deg,
          rgba(255,255,255,0.06) 0%,
          rgba(255,255,255,0.16) 20%,
          rgba(255,255,255,0.06) 40%
        );
        background-size: 200% 100%;
        animation: shimmer 1.1s infinite;

        &.short { width: 55%; }
      }
    }
  }

  /* ===================== Chat Input ===================== */
  .chat-input {
    display: flex;
    justify-content: center;
    padding: 5px;

    .input-wrapper {
      position: relative;
      width: 680px;

      input {
        background-color: #303030;
        width: 100%;
        padding: 16px 60px 16px 16px;
        border-radius: 26px;
        border: none;
        outline: none;
        box-shadow: none;
        color: #fff;
      }

      button {
        position: absolute;
        right: 12px;
        top: 50%;
        transform: translateY(-50%);
        border: none;
        background-color: #212121;
        color: #fff;
        border-radius: 50%;
        width: 36px;
        height: 36px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        transition: background 0.2s;

        &:hover { background-color: #0066cc; }
      }
    }
  }
}

/* ===================== Keyframes (root scope) ===================== */
@keyframes dotBounce {
  0%, 80%, 100% { transform: translateY(0) scale(0.85); opacity: .7; }
  40% { transform: translateY(-3px) scale(1); opacity: 1; }
}

@keyframes hueShift {
  0% { background-position: 0% 50%; }
  100% { background-position: 100% 50%; }
}

@keyframes shimmer {
  0%   { background-position: -200% 0; }
  100% { background-position: 200% 0; }
}
